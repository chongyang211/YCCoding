# 图片不合理检测库
#### 目录介绍
- 01.基础概念介绍
- 02.常见思路和做法
- 03.Api调用说明
- 04.遇到的坑分析



### 01.基础概念介绍


### 02.常见思路和做法
#### 2.1 检测不合理图片
- 遇到的问题描述
    - 在实际开发中，如果服务传给客户端的图片的实际宽高是远大于 ImageView 的宽高，那么这种情况是会浪费内存，那么如何去检测这种不合理的情况呢？
- 解决方案如下
    - 第一种：给每个ImageView设置监听，然后在回调中计算图片的大小。
    - 第二种：利用hook检测每个ImageView，然后修改执行逻辑，监听其图片大小。


#### 2.2 通用方案说明
- 给每一个 ImageView 设置一个 PreDrawListener ，在回调中计算 Bitmap 的大小和 ImageView 的大小。
- 这种方案是可以实现检测功能，但是缺点也很明显，不通用，侵入性比较大。


#### 2.3 Hook方式
- Hook 意思就是挂钩，钩住原有方法，修改执行逻辑，这种 Hook 方法是在运行时插桩。
- 使用 epic 来检测不合理图片
    - 第一步：找到我们的 hook 点，在给一个 ImageView 设置一个 Bitmap 时一般都会调用 setImageBitmap，因此该方法就是 hook 点
    - 第二步：hook setImageBitmap 方法，然后在这里个方法中拿到图片信息
    - 第三步：显示警告信息：检测出图片大小不合理




### 03.Api调用说明




### 04.遇到的坑分析














